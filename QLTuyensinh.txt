create database BTL_QLtuyensinh
use BTL_QLtuyensinh
use master
drop database BTL_QLtuyensinh
 create table ChuyenNganh
 (
 manganh char(10) primary key not null,
 tennganh nvarchar(100) not null,
 makhoi char(10) not null
 )

 create table MonPhachDiem(
 phach char(10) primary key not null,
 mon nvarchar(100) not null,
 diem float not null
)

 create table DoiTuongUuTien(
 mavung char(10) primary key not null,
 tengoi nvarchar(100) not null
 )

 CREATE TABLE ChiTietDVDK(
  madv_DKDT char(10) primary key not null,
  noinophoso nvarchar(255) not null
)

 create table ChiTietHoKhau
 ( matinh char(10) primary key not null,
   hokhauthuongtru nvarchar(100) not null
 )

  create table ChiTietTruong( 
  matruong char(10) primary key not null,
  tentruong nvarchar(100) not null,
  manganh char(10) foreign key (manganh) references ChuyenNganh(manganh),
  makhoi char(10) not null
 )

 create table MonPhachSBD (
 sbd char(10) primary key not null,
 phach char(10) not null foreign key (phach) references MonPhachDiem (phach),
 mon nvarchar(100) not null
)

create table SBDTenPhong(
sbd char(10) foreign key (sbd) references MonPhachSBD (sbd) not null,
tenthisinh nvarchar(60) not null ,
ngaysinh date not null ,
phongthi nvarchar(20) not null,
diadiemthi nvarchar(255) not null
) 


create table HoSoTuyenSinh(
 sohoso char(10) primary key not null, 
 matruong char(10) foreign key (matruong) references ChiTietTruong(matruong),
 tentruong nvarchar(100) not null,
 sbd char(10) foreign key (sbd) references  MonPhachSBD (sbd),
 tenthisinh nvarchar(60) not null ,
 ngaysinh date not null,
 mavung char(10) foreign key (mavung) references DoiTuongUuTien(mavung),
 doituonguutien nvarchar(100) not null,
 madv_DKDT char(10) foreign key ( madv_DKDT) references ChiTietDVDK(madv_DKDT) 
 )

create table KetQua(
sohoso char(10) primary key not null,
sbd char(10) foreign key (sbd) references MonPhachSBD (sbd),
ten nvarchar(60) not null,
ngaysinh date not null,
mon nvarchar(100) not null,
diem float not null,
diemuutien float not null,
congdiemvung float not null,
tongdiem float not null
)
insert into MonPhachSBD values('01','Phach1','Toan');
insert into MonPhachSBD values('02','Phach2','Vat ly');

insert into ChiTietHoKhau values('01','Ha Noi')
insert into ChiTietHoKhau values('02','Phu Tho')

insert into ChuyenNganh values('N1','Cong nghe thong tin','A1');
insert into ChuyenNganh values('N2','Khoa học máy tính','A1');

insert into ChiTietTruong values('TR1','Dai hoc Kinh te quoc dan','N1','A1');
insert into ChiTietTruong values('TR2','Dai hoc Bách Khoa','N2','A1');

insert into DoiTuongUuTien values('UT1','Ngheo');
insert into DoiTuongUuTien values('UT2','Rat Ngheo');
insert into DoiTuongUuTien values('UT3','Khong uu tien');

insert into ChiTietDVDK values('DVDK','HaNoi');
insert into ChiTietDVDK values('DVDK1','HaiPhong');

insert into SBDTenPhong values('01','Nguyen Van A','2001-1-1','P101','Cau Giay');
insert into SBDTenPhong values('02','Nguyen Van B','2001-2-1','P102','Cau Giay');

insert into MonPhachDiem values('Phach1','Toan',10);
insert into MonPhachDiem values('Phach2','Vatly',9);

insert into KetQua values('HS1','01','Nguyen Van A','2001/1/1','Toan',10,0.5,0.5,10);
insert into KetQua values('HS2','02','Nguyen Van B','2001/2/1','Vat ly',9,0,0,9);
select *from KetQua
insert into HoSoTuyenSinh values('HS1','TR1','Dai hoc Kinh te quoc dan','01','Nguyen Van A','2001/1/1','UT1','Ngheo','DVDK')
insert into HoSoTuyenSinh values('HS2','TR2','Dai hoc Bach Khoa','02','Nguyen Van B','2001/2/1','UT3','Khong uu tien','DVDK1')

create table LOGIN(
    user_id char(20) primary key,
    password nvarchar(50) 
)
drop table LOGIN
insert into LOGIN values('admin','1')